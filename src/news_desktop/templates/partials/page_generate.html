{% if cluster %}
<div class="header">
  <div class="title">{{ cluster.name }}</div>

  <div class="header-actions">
    <button class="btn ghost"
            hx-get="/page?cluster_id={{ selected_cluster_id }}&mode=list&q={{ q|urlencode }}"
            hx-target="#page"
            hx-swap="innerHTML">
      ← Назад к списку
    </button>
  </div>
</div>

<div class="split">
  <section class="panel">
    <div class="panel-head">
      <div class="panel-title">Новости кластера</div>

      <input class="search"
             name="q"
             value="{{ q }}"
             placeholder="Поиск по новостям…"
             hx-get="/clusters/{{ selected_cluster_id }}/news?mode={{ mode }}"
             hx-target="#news-list"
             hx-trigger="keyup changed delay:300ms, search"
             hx-include="this"
             />
    </div>

    <div id="news-list">
      {% include "partials/news_list.html" %}
    </div>
  </section>

  <section class="panel">
    <div class="panel-head">
      <div class="panel-title">Просмотр + Генерация</div>
      <button class="btn ghost"
              hx-get="/news/0/view?cluster_id={{ selected_cluster_id }}&mode={{ mode }}&q={{ q|urlencode }}"
              hx-target="#viewer"
              hx-swap="innerHTML">
        Очистить просмотр
      </button>
    </div>

    <div id="viewer">
      {% include "partials/news_viewer.html" %}
    </div>

    <div id="generator-panel"
         hx-get="/clusters/{{ selected_cluster_id }}/generator_panel?mode={{ mode }}&q={{ q|urlencode }}"
         hx-trigger="load"
         hx-swap="innerHTML">
    </div>
  </section>
</div>

{% else %}
<div class="empty">Нет кластеров</div>
{% endif %}
